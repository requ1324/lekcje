<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
  <div id="result"></div>

  <script>
    const pesel = prompt('Podaj PESEL:');
    const resultDiv = document.getElementById('result');

    if (!pesel || pesel.length !== 11) {
      resultDiv.innerHTML = 'Błędny PESEL - musi mieć 11 znaków';
    } else if (!/^\d+$/.test(pesel)) {
      resultDiv.innerHTML = 'Błędny PESEL - musi zawierać tylko cyfry';
    } else {
      const weights = [1, 3, 7, 9, 1, 3, 7, 9, 1, 3];
      let sum = 0;
      for (let i = 0; i < 10; i++) {
        sum += parseInt(pesel[i]) * weights[i];
      }
      const checksum = (10 - (sum % 10)) % 10;
      const lastDigit = parseInt(pesel[10]);

      if (checksum !== lastDigit) {
        resultDiv.innerHTML = 'Błędny PESEL - nieprawidłowa suma kontrolna';
      } else {
        const year = parseInt(pesel.substring(0, 2));
        const month = parseInt(pesel.substring(2, 4));
        const day = parseInt(pesel.substring(4, 6));
        const genderDigit = parseInt(pesel[9]);

        let century = 1900;
        let monthAdjusted = month;
        if (month > 12) {
          if (month > 80 && month <= 92) {
            century = 1800;
            monthAdjusted = month - 80;
          } else if (month > 12 && month <= 32) {
            century = 2000;
            monthAdjusted = month - 20;
          }
        }

        const fullYear = century + year;
        const gender = genderDigit % 2 === 0 ? 'Kobieta (K)' : 'Mężczyzna (M)';
        const birthDate = `${String(day).padStart(2, '0')}.${String(monthAdjusted).padStart(2, '0')}.${fullYear}`;

        resultDiv.innerHTML = `
          <p><strong>PESEL jest prawidłowy</strong></p>
          <p>a) Płeć: ${gender}</p>
          <p>b) Data urodzenia: ${birthDate}</p>
        `;
      }
    }
  </script>
</body>
</html>