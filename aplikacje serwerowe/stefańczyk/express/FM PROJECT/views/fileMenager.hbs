<div class="header">
  <div class="header-content">
    <h1>{{title}}</h1>
    <div class="breadcrumb">
      <span class="breadcrumb-item">
        <span>ğŸ </span>
        {{#each root}}
          <a href="/move?path=/{{this.path}}">{{this.name}}</a>/
        {{/each}}
      </span>
    </div>
  </div>
</div>

<div class="container">
  <div class="toolbar">
    <button class="btn btn-primary" id="newFolder">
      <span>ğŸ“</span>
      <span>Nowy folder</span>
    </button>
    <button class="btn btn-secondary" id="newFile">
      <span>ğŸ“„</span>
      <span>Nowy plik</span>
    </button>
    <form action="/upload" method="get" style="display: inline-flex;">
      <label class="file-input-wrapper">
        <input type="file" multiple name="upload" id="fileUpload" />
        <button type="submit" class="btn btn-upload">
          <span>â¬†ï¸</span>
          <span>PrzeÅ›lij pliki</span>
        </button>
      </label>
    </form>
  </div>

  <div class="content-grid">
    <div class="section">
      <div class="section-header">
        <span class="section-title">ğŸ“ Foldery</span>
      </div>
      <div class="item-list">
        {{#each folders}}
          <div class="item">
            <div class="item-content">
              <span class="item-icon">ğŸ“</span>
              <a href="/move?path=/{{this}}" class="item-name">{{this}}</a>
            </div>
            <button class="renameBtn">R</button>
            <form class="renameForm" method="post" action="/rename">
              <input type="hidden" name="folderName" value="{{this}}" />
              <input
                type="text"
                name="newFolderName"
                placeholder="podaj nowÄ… nazwÄ™"
              />
              <button class="submit" type="submit">Rename</button>
              <button class="cancel">cancel</button>
            </form>
            <a href="/deleteFolder?name={{this}}" class="delete-btn">X</a>
          </div>
        {{else}}
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“‚</div>
            <div class="empty-state-text">Brak folderÃ³w</div>
          </div>
        {{/each}}
      </div>
    </div>

    <div class="section">
      <div class="section-header">
        <span class="section-title">ğŸ“„ Pliki</span>
      </div>
      <div class="item-list">
        {{#each files}}
          <div class="item">
            <div class="item-content">
              <span class="item-icon">ğŸ“„</span>
              <span class="item-name">{{this}}</span>
            </div>
            <a href="/deleteFile?name={{this}}" class="delete-btn">Ã—</a>
          </div>
        {{else}}
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“„</div>
            <div class="empty-state-text">Brak plikÃ³w</div>
          </div>
        {{/each}}
      </div>
    </div>
  </div>
</div>

<script>
  let isShow = false; const newFolderBtn = document.getElementById('newFolder');
  const newFileBtn = document.getElementById('newFile');
  newFolderBtn.addEventListener('click', () => { if (isShow) return; isShow =
  true; const div = document.createElement("div"); const form =
  document.createElement("form"); form.classList.add("folderForm"); form.method
  = "post"; form.action = "/addFolder"; div.appendChild(form); const input =
  document.createElement("input"); input.type = "text"; input.placeholder =
  "folder name"; input.name = 'folderName'; form.appendChild(input); const
  submit = document.createElement("button"); submit.type = "submit";
  submit.innerText = "create folder"; form.appendChild(submit); const cancel =
  document.createElement("button"); cancel.type = "button"; cancel.innerText =
  "cancel"; cancel.addEventListener('click', () => {
  document.body.removeChild(div); isShow = false; }); form.appendChild(cancel);
  document.body.appendChild(div); }); newFileBtn.addEventListener('click', () =>
  { if (isShow) return; isShow = true; const div =
  document.createElement("div"); const form = document.createElement("form");
  form.classList.add("fileForm"); form.method = "post"; form.action =
  "/addFile"; div.appendChild(form); const input =
  document.createElement("input"); input.type = "text"; input.placeholder =
  "file name"; input.name = 'fileName'; form.appendChild(input); const submit =
  document.createElement("button"); submit.type = "submit"; submit.innerText =
  "create file"; form.appendChild(submit); const cancel =
  document.createElement("button"); cancel.type = "button"; cancel.innerText =
  "cancel"; cancel.addEventListener('click', () => {
  document.body.removeChild(div); isShow = false; }); form.appendChild(cancel);
  document.body.appendChild(div); }); const renameBtns =
  document.querySelectorAll(".renameBtn"); renameBtns.forEach(renameBtn => {
  renameBtn.addEventListener('click', (e)=> { const div =
  document.createElement('div'); const form = document.createElement('form');
  form.action = "/rename"; form.classList.add("renameForm"); const input =
  document.createElement('input'); input.classList.add("renameInput") const
  submit = document.createElement("button"); submit.type ="submit";
  submit.classList.add("submit"); const cancel =
  document.createElement("button"); cancel.textContent = "cancel";
  submit.textContent = "rename"; cancel.classList.add("cancel");
  cancel.addEventListener('click', (e) => { document.body.removeChild(div); })
  form.append(input); form.append(cancel); form.append(submit);
  div.append(form); document.body.append(div); }) })
</script>